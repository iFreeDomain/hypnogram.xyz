(this["webpackJsonpvqgan-clip"]=this["webpackJsonpvqgan-clip"]||[]).push([[0],{140:function(e,t,n){},143:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(37),i=n.n(a),s=(n(140),n(10)),c=n(111),l=n(34),d="https://api.hypnogram.xyz",u="/",j="/user",g="/user/credits",h={"Hypnogram/1.1.1":"Hypnogram","VQGAN_CLIP/1.0.0":"VQGAN+CLIP"},b=Object.keys(h),m="AUTHENTICATION_FAILED",p="success",O="loading",f="Request failed :(\nPlease try again",x="Authentication failed\nPlease sign in again",y="Sign in session expired\nPlease sign in again",v={TOO_FAST:"Too fast!\nLeave a few seconds between requests",PROMPT_TOO_LONG:"The prompt is too long!",NOT_ENOUGH_CREDITS:"Not enough credits!\nPlease purchase more credits",NOT_SIGNED_IN:"You must be signed in to generate a high resolution image",STANDARD_QUEUE_FULL:"Sorry! The servers are temporarily overwhelmed\nPlease try again\n(You can still generate high resolution images)",AUTHENTICATION_EXPIRED:y,AUTHENTICATION_FAILED:x},w="SignInWithGoogleButtonDiv",S="pk_live_51K4AqfBhE6m1kJNTn6yzSQfvHhhtQzDLMriovV9grgXqhjU7CbNV2ERQ8fdwxlMNUvXN2unnN8wGdfqMM5a5DEAR00m6LoSt0V",P={DEV:"pk_test_51K4AqfBhE6m1kJNTtwoLrBl7lgrWD5iN7NTcPqNytewn381GNwRxkTHYlVwFI4AGDqOV29StmyPGlSSefITZSiwO00gFiBK3hX",STAGING:S,PROD:S}.PROD,C="AaJzgSdzw4IE2UpQ1F9BNQJVcGEq-So5uOAXZ8UYeTyBGV5CDUUCvyCWoc3BX_uTKB6sE_ScZE6qEeji",T={DEV:"AZ9TqIjV_YnMNdFB_1PEWfp10hhBQOnlYlDlABUe67Y613BaFuv55Q0Drg6jCjBBN1uzZ0sS8ve-GnQ5",STAGING:C,PROD:C}.PROD,_=Object(c.a)({palette:{background:{default:"White",secondary:"#242525"},primary:l.a},typography:{fontFamily:"'Roboto', sans-serif",color:"white",fontSize:18,button:{textTransform:"none",color:"white"}}}),I=500,E=(n(143),n(27)),k=n(217),R=n(61),B=n(212),A=n(215),z=n(214),W=n(103),D=n.n(W),F=n(216),L=n(1);function N(e){var t=e.imageId,n=e.prompt,r=e.imageLoadCallback,o=void 0===r?null:r,a=(Object(E.a)(e,["imageId","prompt","imageLoadCallback"]),""===t?"":"https://s3.amazonaws.com/hypnogram-images/".concat(t,".jpg"));return Object(L.jsxs)(B.a,{sx:{margin:"2vh",display:"inline-block"},children:[Object(L.jsx)("img",{style:{display:"block",minWidth:"30%",maxWidth:"100%"},src:a,onLoad:o,alt:n}),Object(L.jsx)(z.a,{sx:{display:"flex",paddingBottom:0},children:Object(L.jsx)(R.a,{sx:{flexGrow:1,width:0},fontStyle:"italic",variant:"body2",color:"text.secondary",children:n})}),Object(L.jsx)(A.a,{sx:{paddingBottom:"0",paddingTop:"0",justifyContent:"flex-end"},children:Object(L.jsx)("a",{href:a,download:!0,children:Object(L.jsx)(F.a,{"aria-label":"Download",color:"primary",onClick:function(){navigator.clipboard.writeText(a)},children:Object(L.jsx)(D.a,{})})})})]})}function G(e){var t=e.generateRequestStatus,n=e.setGenerateRequestStatus,o=e.setRefreshMyCreditsCount,a=e.newImageId,i=Object(E.a)(e,["generateRequestStatus","setGenerateRequestStatus","setRefreshMyCreditsCount","newImageId"]);switch(Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Image;e.onload=function(){console.log("Successfully loaded image"),n(p),o(2)},e.onerror=function(){console.log("Failed to load image")},t===O&&(console.log("Polling image"),e.src="https://s3.amazonaws.com/hypnogram-images/".concat(a,".jpg"))}),5e3);return function(){clearInterval(e)}}),[n,t,a,o]),t){case O:return i.algoVersion.includes("VQGAN_CLIP")?Object(L.jsxs)("div",{style:{fontWeight:"bold",width:"70%",marginTop:"10vh",marginBottom:"10vh"},children:["This will take a few minutes",Object(L.jsx)(k.a,{style:{width:"100%"}})]}):Object(L.jsxs)("div",{style:{fontWeight:"bold",width:"70%",marginTop:"10vh",marginBottom:"10vh"},children:["This will take a minute",Object(L.jsx)(k.a,{style:{width:"100%"}})]});case p:return Object(L.jsx)(N,{imageId:a,prompt:i.lastSentPrompt});default:return Object(L.jsx)(R.a,{width:"70%",marginTop:"10vh",marginBottom:"10vh",whiteSpace:"pre-line",color:"warning.main",variant:"body1",fontWeight:"bold",children:t})}}var M=n(211),U=n(218),q=n(104),H=n.n(q),V=n(90),Q=n.n(V),Y=n(59),J=n.n(Y);function K(e){var t=e.tipsOpen,n=e.setTipsOpen,r=e.prompt,o=e.setPrompt,a=function(e){var t=e.suggestion,n=e.icon,a=void 0===n?null:n,i=e.color,s=void 0===i?"success.light":i;return Object(L.jsx)(M.a,{startIcon:a,variant:"text",display:"inline-block",sx:{paddingTop:0,paddingBottom:0,paddingLeft:"1vw",paddingRight:"1vw",color:s},onClick:function(){return o(r+(r?", ":"")+t)},children:t})};return Object(L.jsx)(U.a,{in:t,timeout:500,children:Object(L.jsxs)(B.a,{sx:{textAlign:"center"},children:[Object(L.jsxs)(z.a,{width:"50vh",children:[Object(L.jsxs)(R.a,{variant:"body2",color:"text.secondary",children:["Hypnogram.xyz lets you create an image just by writing a prompt.",Object(L.jsx)("br",{}),"Try adding styles or famous artists to your prompts"]}),["Artstation","Watercolor","Thomas Kinkade","Salvador Dali","Art Deco"].map((function(e){return Object(L.jsx)(a,{suggestion:e,prompt:r,setPrompt:o},e)})),Object(L.jsx)("br",{}),["Frederic Edwin Church","Beksinski","Malczewski","M.K. Ciurlionis"].map((function(e){return Object(L.jsx)(a,{suggestion:e,prompt:r,setPrompt:o},e)})),Object(L.jsxs)(R.a,{variant:"body2",color:"text.secondary",children:["Descriptions of landscapes tend to work well",Object(L.jsx)("br",{})]}),Object(L.jsx)(a,{sx:{textAlign:"center"},suggestion:"A futuristic city with flying cars and yellow buildings"}),Object(L.jsx)("br",{}),Object(L.jsxs)(R.a,{variant:"body2",color:"text.secondary",children:["Common objects with unusual textures can produce interesting results",Object(L.jsx)("br",{})]}),Object(L.jsx)(a,{sx:{textAlign:"center"},suggestion:"Butterfly made of butter"}),Object(L.jsx)("br",{}),Object(L.jsxs)(R.a,{variant:"body2",color:"text.secondary",children:["You can have multiple prompts in a single image. Divide each prompt with the ",Object(L.jsx)("b",{children:"|"})," character",Object(L.jsx)("br",{})]}),Object(L.jsx)(a,{suggestion:"Clouds | Dragons sleeping"}),Object(L.jsx)("br",{}),Object(L.jsxs)(R.a,{variant:"body2",color:"text.secondary",children:["This means that the algorithm will try to match both prompts independently.",Object(L.jsx)("br",{}),"Generally it is best not to seperate an object description from a style description",Object(L.jsx)("br",{})]}),Object(L.jsx)(a,{suggestion:"Space station, oil on canvas",icon:Object(L.jsx)(Q.a,{})}),Object(L.jsx)(a,{suggestion:"Space station | oil on canvas",icon:Object(L.jsx)(J.a,{}),color:"error.main"}),Object(L.jsx)("br",{}),Object(L.jsxs)(R.a,{variant:"body2",color:"text.secondary",children:["The best prompts describe specific physical scenes, rather than abstract concepts",Object(L.jsx)("br",{})]}),Object(L.jsx)(a,{suggestion:"Coral airship underwater",icon:Object(L.jsx)(Q.a,{})}),Object(L.jsx)(a,{suggestion:"Annoyance",icon:Object(L.jsx)(J.a,{}),color:"error.main"}),Object(L.jsx)("br",{}),Object(L.jsx)(R.a,{variant:"body2",color:"text.secondary",children:"Prompts can be up to 73 characters long"})]}),Object(L.jsx)(A.a,{sx:{paddingBottom:"0",paddingTop:"0",justifyContent:"flex-end"},children:Object(L.jsx)(F.a,{"aria-label":"Close Tips",color:"primary",onClick:function(){return n(!1)},children:Object(L.jsx)(H.a,{})})})]})})}var X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};function Z(e,t){window.gtag?window.gtag("event",e,t):console.log("Failed to send Google Analytics event: ",e,t,". window.gtag is not defined")}function $(e){var t=e.name,n=e.delta,r=e.value;Z(t,{id:e.id,value:r,delta:n})}function ee(e,t,n,r,o,a,i,s){Z("generate_image_response",{algorithm:h[e],algorithm_version:e,prompt:t.substring(0,100),high_resolution:n,success:r,image_id:o,error_code:a,error_message:i.substring(0,100),reponse_time:s})}var te=n(105),ne=n.n(te);var re=function(e){return Object(L.jsxs)(M.a,{onClick:e.signOutWithUserElementsTransition,color:"primary",children:["Sign out",Object(L.jsx)(ne.a,{sx:{paddingLeft:"0.5vw"}})]})};function oe(e,t,n,r){function o(){window.google.accounts.id.initialize({client_id:"87559425137-lgi1smgo8l1gno79rchtsjeef4ci3qu4.apps.googleusercontent.com",auto_select:!0,callback:function(t){function o(){var e=t.credential;n(e),r(function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}(e))}e?e(o):o()}}),t()}if(window.google)o();else{var a,i=document.createElement("script");i.src="https://accounts.google.com/gsi/client",i.onload=o,i.async=!0,i.id="google-client-script",null===(a=document.querySelector("body"))||void 0===a||a.appendChild(i)}}var ae=n(190);function ie(e){return Object(L.jsx)(ae.a,{direction:"left",timeout:I,in:e.signInButtonOpen,children:Object(L.jsx)(M.a,{sx:{minHeight:"70px",paddingLeft:"10px",paddingRight:"10px"},onClick:function(){return e.updateUrlPath(j)},color:"primary",children:e.userToken?Object(L.jsx)("img",{src:e.userInfo.picture,alt:e.userInfo.name,style:{maxHeight:"50px",borderRadius:"50%"}}):"Sign in"})})}var se=function(e,t,n,r,o,a){var i=n,s=e+1;function c(e,n){o(e[n][0]),a(e[n][1]),t(n)}"undefined"===typeof i||"undefined"===typeof i[s]?(console.log("Getting new batch of recent images"),fetch(d+"/randomimages").then((function(e){if(!e.ok||e.hasOwnProperty("error"))throw new Error(e.status);return e.json()})).then((function(e){if(e.hasOwnProperty("error_code"))console.log("Failed to get recent images. Error code: "+e.error_code+". Error message: "+e.error_message);else{var t=e;r(e);c(t,0)}})).catch((function(e){console.log("Error: "+e)}))):c(i,s)};function ce(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(0),i=Object(s.a)(a,2),c=i[0],l=i[1],d=Object(r.useState)([]),u=Object(s.a)(d,2),j=u[0],g=u[1],h=Object(r.useState)(""),b=Object(s.a)(h,2),m=b[0],p=b[1],O=Object(r.useState)(""),f=Object(s.a)(O,2),x=f[0],y=f[1];Object(r.useEffect)((function(){se(c,l,j,g,p,y)}),[]);return Object(L.jsx)(ae.a,{direction:n?"right":"left",in:n,timeout:500,children:Object(L.jsx)("div",{children:Object(L.jsx)(N,{imageId:m,prompt:x,imageLoadCallback:function(){o(!0);var e=setInterval((function(){o(!1);var t=setInterval((function(){se(c,l,j,g,p,y),clearInterval(t)}),500);clearInterval(e)}),8e3)}})})})}var le=n(206),de=n(220),ue=n(204),je=n(228),ge=n(210),he=n(110),be=n.n(he),me=n(196),pe=n(106),Oe=n(91),fe=n.n(Oe),xe=n(107),ye=n(60),ve=n(219);function we(e){var t=e.paypalOrderId,n=e.setReadyToPay,o=e.setPayPalSuceeded,a=e.setPayPalStatusMessage,i=e.creditsToBuy,c=e.setRefreshMyCreditsCount,l=Object(ye.c)(),d=Object(s.a)(l,2),u=d[0].isInitial,j=d[1];return Object(r.useEffect)((function(){window.location.pathname.startsWith(g)&&u&&j({type:"setLoadingStatus",value:"pending"})})),Object(L.jsx)(ye.a,{style:{layout:"vertical"},disabled:!1,forceReRender:[t],fundingSource:"paypal",createOrder:function(e,n){return Promise.resolve(t)},onApprove:function(e,t){return t.order.capture().then((function(){console.log("PayPal order captured succeeded"),n(!1),o(!0),a(i.toString()+" credits will be added to your account in a few moments"),c(10)})).catch((function(e){console.log("PayPal order capture failed"),n(!1),o(!1),a("Please try a different payment method")}))}})}function Se(e){var t=e.paypalSucceeded,n=e.paypalStatusMessage;Object(E.a)(e,["paypalSucceeded","paypalStatusMessage"]);return n&&Object(L.jsxs)(ve.a,{marginBottom:"3vh",children:[Object(L.jsx)(R.a,{fontWeight:"bold",color:t?"success.light":"error.main",align:"center",variant:"h5",gutterBottom:!0,children:t?"Payment Successful":"Payment Failed"}),Object(L.jsx)(R.a,{color:t?"success.main":"error.main",align:"center",variant:"body2",gutterBottom:!0,children:n})]})}var Pe=n(51),Ce=n.n(Pe),Te=n(203),_e=n(209),Ie=n(197),Ee=n(38),ke=n(108),Re=n(198);function Be(e){var t=e.urlPath,n=e.userToken,o=e.myCredits,a=e.setRefreshMyCreditsCount,i=e.setPreviousMyCredits,c=Object(r.useState)(null),l=Object(s.a)(c,2),u=l[0],j=l[1],h=Object(r.useState)(""),b=Object(s.a)(h,2),p=b[0],O=b[1],f=Object(r.useState)(null),x=Object(s.a)(f,2),y=x[0],v=x[1],w=Object(r.useState)(100),S=Object(s.a)(w,2),C=S[0],_=S[1],I=Object(r.useState)(!1),E=Object(s.a)(I,2),k=E[0],B=E[1],A=Object(r.useState)(null),z=Object(s.a)(A,2),W=z[0],D=z[1],F=Object(r.useState)(!1),N=Object(s.a)(F,2),G=N[0],M=N[1],q=Object(r.useState)(""),H=Object(s.a)(q,2),V=H[0],Q=H[1];Object(r.useEffect)((function(){W||(console.log("Loading stripe"),D(Object(ke.loadStripe)(P)))}),[W]),Object(r.useEffect)((function(){window.location.pathname.startsWith(g)&&!k&&[{endpoint:"/createpaymentintent",stateFunc:j},{endpoint:"/createpaypalorder",stateFunc:v}].forEach((function(e){fetch(d+e.endpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({credits:C})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("error_code")?(console.log("Payment setup failed. Error code:",t.error_code,". Error message:",t.error_message),t.error_code===m&&t.error_message.includes("Token expired")?O("Sign in session expired. Please refresh"):O("Error: "+t.error_code)):(O(""),e.stateFunc(t))})).catch((function(e){return console.log("Payment setup failed. Error:",e)}))}))}),[t,C,n,k]);var Y={clientSecret:u?u.client_secret:null,appearance:{theme:"stripe"}};return Object(L.jsxs)(ve.a,{sx:{display:"inline-block",minWidth:"40vw"},children:[Object(L.jsx)(Se,{paypalSucceeded:G,paypalStatusMessage:V}),Object(L.jsx)(Ee.Elements,{stripe:W,children:Object(L.jsx)(ze,{urlPath:t,setRefreshMyCreditsCount:a})}),Object(L.jsxs)(de.a,{fullWidth:!0,sx:{marginBottom:"1vh"},children:[Object(L.jsx)(Te.a,{children:"Buy Credits"}),Object(L.jsx)(Ie.a,{value:C,label:"Buy Credits",onChange:function(e){Q(""),i(o),j(null),v(null),_(e.target.value)},disabled:k,sx:{marginBottom:"1vh"},children:[100,200,300,500,1e3,2e3].map((function(e){return Object(L.jsx)(_e.a,{color:"secondary",size:"medium",value:e,children:Object(L.jsxs)(ve.a,{display:"flex",alignItems:"center",children:[Object(L.jsx)(Ce.a,{sx:{paddingRight:"0.5vw"}}),e," Credits"]})},e)}))}),Object(L.jsxs)(Re.a,{loading:!u||!y,onClick:function(){Q(""),i(o),B(!0)},color:"secondary",variant:k?"outlined":"contained",children:["Pay $",((u?u.amount:"not set")/100).toFixed(2)]}),Object(L.jsx)(U.a,{in:!!p,children:Object(L.jsx)(R.a,{variant:"body2",color:"error",sx:{marginTop:"1vh"},children:p})})]}),Object(L.jsxs)(U.a,{in:k,children:[Object(L.jsx)(ye.b,{options:{"client-id":T},deferLoading:!0,children:Object(L.jsx)(we,{paypalOrderId:y,setReadyToPay:B,creditsToBuy:C,setPayPalSuceeded:M,setPayPalStatusMessage:Q,setRefreshMyCreditsCount:a})}),Object(L.jsx)(R.a,{variant:"body1",fontWeight:"bold",sx:{marginBottom:"0.6vh"},children:"or"})]}),k&&u.client_secret&&Object(L.jsx)(Ee.Elements,{options:Y,stripe:W,children:Object(L.jsx)(Ae,{setReadyToPay:B})})]})}function Ae(e){var t=e.setReadyToPay,n=(Object(E.a)(e,["setReadyToPay"]),Object(Ee.useStripe)()),o=Object(Ee.useElements)(),a=Object(r.useState)(""),i=Object(s.a)(a,2),c=i[0],l=i[1],d=Object(r.useState)(!1),u=Object(s.a)(d,2),j=u[0],h=u[1],b=Object(r.useState)(!1),m=Object(s.a)(b,2),p=m[0],O=m[1],f=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n&&o){e.next=3;break}return e.abrupt("return");case 3:return O(!0),e.next=6,n.confirmPayment({elements:o,confirmParams:{return_url:"https://hypnogram.xyz"+g}});case 6:r=e.sent,a=r.error,h(!0),l(a.message),O(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsxs)("form",{id:"payment-form",onSubmit:f,children:[Object(L.jsx)(Ee.PaymentElement,{onFocus:function(){h(!1)},id:"payment-element"}),Object(L.jsx)(U.a,{in:j,children:Object(L.jsx)(R.a,{maxWidth:"50vh",marginTop:"1vh",fontWeight:"bold",variant:"body2",color:"error",children:c})}),Object(L.jsx)(Re.a,{sx:{width:"100%",marginTop:"1vh"},type:"submit",variant:"contained",id:"submitButton",loading:p,disabled:p||!n||!o,children:"Pay now"}),Object(L.jsx)(M.a,{sx:{width:"100%",marginTop:"0.5vh"},size:"small",variant:"text",color:"error",onClick:function(){return t(!1)},children:" Cancel "})]})}function ze(e){var t=e.urlPath,n=e.setRefreshMyCreditsCount,o=Object(Ee.useStripe)(),a=Object(r.useState)(""),i=Object(s.a)(a,2),c=i[0],l=i[1],d=Object(r.useState)(!1),u=Object(s.a)(d,2),j=u[0],g=u[1],h=Object(r.useState)(""),b=Object(s.a)(h,2),m=b[0],p=b[1];return Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("payment_intent_client_secret");if(!e||!o)return l(""),void p("");o.retrievePaymentIntent(e).then((function(e){var t=e.paymentIntent;switch(t.status){case"succeeded":g(!0),l("Payment Successful"),p(String(t.description)+" credits will be added to your account within a few moments"),n(10);break;case"processing":g(!0),l("Payment Processing"),p(String(t.description)+" credits will be added to your account when the payment is complete");break;case"requires_payment_method":g(!1),l("Payment Failed"),p("Your payment was not successful, please try again.");break;default:g(!1),l("Payment Failed"),p("Something went wrong.")}}))}),[n,o,t]),Object(L.jsxs)(ve.a,{marginBottom:"3vh",children:[Object(L.jsx)(R.a,{fontWeight:"bold",color:j?"success.light":"error.main",align:"center",variant:"h5",gutterBottom:!0,children:c}),Object(L.jsx)(R.a,{color:j?"success.main":"error.main",align:"center",variant:"body2",gutterBottom:!0,children:m})]})}var We=n(224),De=n(194),Fe=n(226),Le=n(227),Ne=n(225),Ge=n(221),Me=n(195),Ue=n(201),qe=Object(r.forwardRef)((function(e,t){var n=e.userDialogOpen,r=Object(E.a)(e,["userDialogOpen"]);return Object(L.jsx)(ae.a,Object(pe.a)({direction:n?"right":"left",ref:t},r))}));function He(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),o=n[0],a=n[1];return Object(r.useEffect)((function(){e.userToken&&function(e,t,n){fetch(d+"/myrecentimages",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+e}}).then((function(e){if(!e.ok||e.hasOwnProperty("error"))throw new Error(e.status);return e.json()})).then((function(e){e.hasOwnProperty("error_code")?(console.log("Failed with error code: "+e.error_code+". Error message: "+e.error_message),e.error_code===m&&e.error_message.includes("Token expired")?(t("Sign in session expired. Please refresh"),n()):t("Error: "+e.error_code)):t(e)})).catch((function(e){t("Error"),console.log("Failed to get user recent images: "+e.message)}))}(e.userToken,a,e.triggerGoogleSignInPrompt)}),[e.urlPath,e.userToken,e.triggerGoogleSignInPrompt]),Object(L.jsxs)(We.a,{maxWidth:!1,open:window.location.pathname.startsWith(j),TransitionProps:{userDialogOpen:window.location.pathname.startsWith(j)},TransitionComponent:qe,keepMounted:!0,transitionDuration:I,onClose:function(){return e.updateUrlPath(u)},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(L.jsx)(De.a,{style:{padding:"0px"},children:Object(L.jsx)(Ne.a,{style:{backgroundColor:"#2396F3",position:"relative"},children:Object(L.jsx)("div",{style:{padding:"1vw"},children:e.userToken?"Profile":"Sign in"})})}),Object(L.jsx)(Fe.a,{style:{marginLeft:"0px",marginRight:"0px",padding:"0px",maxWidth:"95vw"},children:Object(L.jsx)(Ve,{urlPath:e.urlPath,updateUrlPath:e.updateUrlPath,userInfo:e.userInfo,signOutWithUserElementsTransition:e.signOutWithUserElementsTransition,userToken:e.userToken,myRecentImages:o,myCredits:e.myCredits,setRefreshMyCreditsCount:e.setRefreshMyCreditsCount})}),Object(L.jsx)(Le.a,{children:Object(L.jsxs)(M.a,{onClick:function(){return e.updateUrlPath(u)},color:"primary",children:["Close",Object(L.jsx)(J.a,{style:{paddingLeft:"0.5vw"}})]})})]})}function Ve(e){var t=e.urlPath,n=e.updateUrlPath,o=e.userInfo,a=e.signOutWithUserElementsTransition,i=e.userToken,c=e.myRecentImages,l=e.myCredits,d=e.setRefreshMyCreditsCount,u=Object(r.useState)(l),h=Object(s.a)(u,2),b=h[0],m=h[1];Object(r.useEffect)((function(){b||m(l)}),[l,b]);var p=b&&l&&l>b;return i?Object(L.jsxs)(Ge.a,{component:"nav",sx:{minWidth:"40vw"},style:{textAlign:"center",justifyContent:"center"},children:[Object(L.jsx)(Ue.a,{style:{justifyContent:"center"},children:Object(L.jsx)("img",{src:o.picture,alt:o.name,style:{borderRadius:"50%"}})}),Object(L.jsx)(Ue.a,{style:{justifyContent:"center"},children:Object(L.jsx)(re,{signOutWithUserElementsTransition:a})}),Object(L.jsx)(Ue.a,{style:{textAlign:"center"},children:Object(L.jsx)(Me.a,{sx:{".MuiTypography-root":{fontWeight:"800"}},primary:o.name})}),Object(L.jsx)(Ue.a,{style:{justifyContent:"center"},children:Object(L.jsxs)(M.a,{variant:"contained",color:p?"success":"primary",size:"medium",sx:{minWidth:"15vw"},onClick:function(){window.location.pathname.startsWith(g)?n(j):n(g)},children:[Object(L.jsx)(Ce.a,{}),Object(L.jsx)(ve.a,{sx:{width:"100% "},children:null===l?"Loading":l+" Credits"})]})}),Object(L.jsx)(Ue.a,{style:{textAlign:"center",justifyContent:"center"},children:Object(L.jsx)(U.a,{in:window.location.pathname.startsWith(g),sx:{width:"100%",marginTop:"3vh"},children:Object(L.jsx)(Be,{setRefreshMyCreditsCount:d,setPreviousMyCredits:m,myCredits:l,urlPath:t,userToken:i})})}),Object(L.jsx)(Qe,{myRecentImages:c})]}):Object(L.jsx)(Ge.a,{component:"nav",sx:{minWidth:"20vw"},children:Object(L.jsx)(Ue.a,{style:{justifyContent:"center"},children:Object(L.jsx)(ve.a,{sx:{padding:"7vh"},id:w})})})}function Qe(e){var t=e.myRecentImages,n="string"===typeof t,r=n?t:0===t.length?"Your creations will appear here":"My recent images";return Object(L.jsxs)(ve.a,{children:[Object(L.jsx)(R.a,{sx:{marginBottom:"0",marginTop:"3vw"},color:n?"error.main":"body",fontWeight:"bold",align:"center",variant:"body1",gutterBottom:!0,children:r}),!n&&t.map((function(e){return Object(L.jsx)(N,{sx:{padding:"3vw"},imageId:e[0],prompt:e[1]},e[0])}))]})}var Ye=n(202);function Je(e){var t=e.ezoicId,n=e.ezoicAdsOpen,r=Object(E.a)(e,["ezoicId","ezoicAdsOpen"]);return Object(L.jsx)(U.a,{in:n,children:Object(L.jsx)(ve.a,{id:"ezoic-pub-ad-placeholder-"+t.toString(),children:r.children})})}function Ke(){var e=Object(r.useState)(0),t=Object(s.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(!1),i=Object(s.a)(a,2),c=i[0],l=i[1],j=Object(r.useState)(!0),m=Object(s.a)(j,2),p=m[0],S=m[1],P=Object(r.useState)(""),C=Object(s.a)(P,2),T=C[0],E=C[1],k=Object(r.useState)(""),B=Object(s.a)(k,2),A=B[0],z=B[1],W=Object(r.useState)(""),D=Object(s.a)(W,2),F=D[0],N=D[1],q=Object(r.useState)(""),H=Object(s.a)(q,2),V=H[0],Q=H[1],Y=Object(r.useState)(b[0]),J=Object(s.a)(Y,2),X=J[0],$=(J[1],Object(r.useState)("")),te=Object(s.a)($,2),ne=te[0],re=te[1],ae=Object(r.useState)(""),se=Object(s.a)(ae,2),he=se[0],pe=se[1],Oe=Object(r.useState)(""),fe=Object(s.a)(Oe,2),xe=fe[0],ye=fe[1],ve=Object(r.useState)(!0),we=Object(s.a)(ve,2),Se=we[0],Pe=we[1],Te=Object(r.useState)(null),_e=Object(s.a)(Te,2),Ie=_e[0],Ee=_e[1],ke=Object(r.useState)(1),Re=Object(s.a)(ke,2),Be=Re[0],Ae=Re[1],ze=Object(r.useState)(!1),We=Object(s.a)(ze,2),De=We[0],Fe=We[1],Le=Object(r.useState)(""),Ne=Object(s.a)(Le,2),Ge=Ne[0],Me=Ne[1];function Ue(e){window.history.pushState("","",e),o(e)}Object(r.useEffect)((function(){Ue(window.location.pathname+window.location.search),setTimeout((function(){!function(e,t){var n=document.createElement("script");n.async=!0,n.src="//www.ezojs.com/ezoic/sa.min.js",document.head.appendChild(n),n.onload=function(){window.ezstandalone.define(104,105,106,107),window.ezstandalone.enable(),window.ezstandalone.display(),setTimeout((function(){return e(!0)}),t)},n.onerror=function(){console.log("Failed to load ezoic script")}}(l,12e3)}),2e3)}),[]);var qe=Object(r.useCallback)((function(e){var t=window.location.pathname+window.location.search;Ue(u),Pe(!1);var n=setInterval((function(){e(),clearInterval(n)}),I),r=setInterval((function(){Ue(t),Pe(!0),clearInterval(r)}),1e3)}),[]);function Ve(){pe(""),ye(""),oe(null,(function(){window.google.accounts.id.disableAutoSelect()}),pe,ye)}function Qe(){qe(Ve)}var Ke=Object(r.useCallback)((function(){oe((function(e){return qe(e)}),(function(){window.google.accounts.id.prompt();var e=setInterval((function(){var t=document.getElementById("credential_picker_container");t&&(t.style["z-index"]=2147483647),clearInterval(e)}),200)}),pe,ye)}),[qe]);return Object(r.useEffect)((function(){Ke()}),[Ke]),Object(r.useEffect)((function(){he?Be>0&&(fetch(d+"/mycredits",{headers:{Authorization:"Bearer "+he}}).then((function(e){if(!e.ok||e.hasOwnProperty("error"))throw new Error(e.status);return e.json()})).then((function(e){e.hasOwnProperty("error_code")?console.log("Failed to get credits. Error code: "+e.error_code+". Error message: "+e.error_message):Ee(e)})).catch((function(e){console.log("Error: "+e)})),setTimeout((function(){Ae(Be-1)}),6e3)):(Ee(null),Ae(1))}),[Be,he]),Object(r.useEffect)((function(){var e;(null===(e=document.getElementById(w))||void 0===e?void 0:e.innerHTML)||he||oe((function(e){return qe(e)}),(function(){window.google.accounts.id.renderButton(document.getElementById(w),{theme:"outline",size:"large",shape:"pill"})}),pe,ye)}),[he,qe]),Object(r.useEffect)((function(){fetch(d+"/premiumimageinfo").then((function(e){if(!e.ok||e.hasOwnProperty("error"))throw new Error(e.status);return e.json()})).then((function(e){e.hasOwnProperty("error_code")?console.log("Failed to get premium image info. Error code: "+e.error_code+". Error message: "+e.error_message):Me(e)})).catch((function(e){console.log("Error: "+e)}))}),[]),Object(L.jsx)(ge.a,{theme:_,children:Object(L.jsxs)(le.a,{container:!0,rowSpacing:2,columnSpacing:0,direction:"row",align:"center",style:{width:"100%",minHeight:"40vh",marginRight:"0px",marginLeft:"0px",paddingRight:"0px",paddingLeft:"0px"},children:[Object(L.jsx)(le.a,{item:!0,xs:12,paddingBottom:"0!important",sx:{overflow:"hidden",backgroundColor:"background.secondary"},children:Object(L.jsx)(Je,{ezoicId:104,ezoicAdsOpen:c})}),Object(L.jsx)(le.a,{align:"right",item:!0,xs:12,paddingTop:"0!important",style:{overflow:"hidden"},children:Object(L.jsx)(ie,{signInButtonOpen:Se,updateUrlPath:Ue,userToken:he,userInfo:xe})}),Object(L.jsx)(le.a,{item:!0,xs:1}),Object(L.jsxs)(le.a,{item:!0,xs:10,children:[Object(L.jsx)(R.a,{variant:"h6",component:"h5",gutterBottom:!0,children:"Create an image from text"}),Object(L.jsx)(He,{urlPath:n,updateUrlPath:Ue,userDialogTransitionWrapper:qe,userInfo:xe,signOutWithUserElementsTransition:Qe,userToken:he,triggerGoogleSignInPrompt:Ke,myCredits:Ie,setRefreshMyCreditsCount:Ae})]}),Object(L.jsx)(le.a,{item:!0,xs:1}),Object(L.jsx)(le.a,{item:!0,xs:1}),Object(L.jsx)(le.a,{item:!0,xs:10,children:Object(L.jsxs)(de.a,{style:{width:"100%",alignItems:"center"},children:[Object(L.jsx)(ue.a,{multiline:!0,id:"outlined-basic",label:"What do you want to see?",variant:"outlined",style:{minWidth:"60%",width:"900px",maxWidth:"100%"},value:T,onChange:function(e){E(e.target.value)}}),Object(L.jsx)(je.a,{control:Object(L.jsx)(Ye.a,{checked:De,onChange:function(){return Fe(!De)}}),sx:{marginTop:"1vh"},labelPlacement:"end",label:Object(L.jsx)(R.a,{fontWeight:"bold",variant:"body2",color:De?"primary.dark":"textSecondary",children:"High resolution"})}),Ge&&Object(L.jsxs)(U.a,{in:De,children:[Object(L.jsxs)(R.a,{sx:{fontSize:"0.9rem"},gutterBottom:!0,children:["High resolution images are ",Ge.premium_image_size[0],"x",Ge.premium_image_size[1]," pixels ",Object(L.jsx)("br",{}),"Standard images are ",Ge.standard_image_size[0],"x",Ge.standard_image_size[1]," pixels"]}),Object(L.jsxs)(M.a,{variant:"text",disabled:Ie<Ge.credits_cost||null===Ie,disableRipple:!0,children:["You have ",null===Ie?"0":Ie," credits."]}),(Ie<Ge.credits_cost||null===Ie)&&Object(L.jsx)(M.a,{sx:{paddingLeft:"0vh"},variant:"text",color:"primary",onClick:function(){Ue(g)},children:"Get more"})]}),Object(L.jsx)(M.a,{variant:"contained",color:"primary",size:"large",disabled:De&&Ie<Ge.credits_cost||De&&null===Ie||F===O||""===T||T.length>74,style:{margin:"1vh"},startIcon:De?Object(L.jsx)(Ce.a,{}):Object(L.jsx)(be.a,{}),onClick:function(){console.log("Generate image button clicked"),S(!1),function(e,t,n,r,o,a,i,s,c,l){o(O),i(t),s(e),console.log("sending request with prompt: "+t),Z("generate_image_request",{algorithm:h[e],algorithm_version:e,prompt:t.substring(0,100)});var u=new Date;if(""!==t){var j={Accept:"application/json","Content-Type":"application/json"};n&&(j.Authorization="Bearer "+n),fetch(d+"/generate",{method:"POST",headers:j,body:JSON.stringify({algorithm:e,prompt:t,high_resolution:r})}).then((function(e){if(!e.ok||e.hasOwnProperty("error"))throw new Error(e.status);return e.json()})).then((function(n){var i=(new Date-u)/1e3;if(n.hasOwnProperty("error_code")){console.log("Failed with error code: "+n.error_code+". Retries: "+n.retries);var s=v[n.error_code];void 0!==s?o(s):(o(f),console.log("Failed with unknown error code: "+n.error_code+". With message: "+n.error_message)),s===y?(c(),l()):s===x&&c(),ee(e,t,r,!1,"",n.error_code,n.error_message,i)}else o(O),a(n.image_id),console.log("Succeeded. Image id: "+n.image_id),ee(e,n.prompt,r,!0,n.image_id,"","",i)})).catch((function(n){var a=(new Date-u)/1e3;o(f),console.log("Failed with unknown error: "+n.message),ee(e,t,r,!1,"","NO_ERROR_CODE",n.message,a)})).finally((function(){var e=(new Date-u)/1e3;console.log("Time taken was: "+e+"s")}))}else o(f)}(X,T,he,De,N,Q,z,re,Qe,Ke)},children:De?"Pay "+Ge.credits_cost+" credits":"Generate"}),Object(L.jsx)(Je,{ezoicId:105,ezoicAdsOpen:c}),Object(L.jsx)(M.a,{color:"primary",size:"small",onClick:function(){return S(!p)},children:"Tips"}),Object(L.jsx)(K,{tipsOpen:p,setTipsOpen:S,prompt:T,setPrompt:E})]})}),Object(L.jsx)(le.a,{item:!0,xs:12,style:{padding:"0px"},children:Object(L.jsx)(G,{newImageId:V,generateRequestStatus:F,setGenerateRequestStatus:N,setRefreshMyCreditsCount:Ae,lastSentPrompt:A,lastSentAlgoVersion:ne,algoVersion:X})}),Object(L.jsx)(le.a,{item:!0,paddingTop:"0!important",xs:12,children:Object(L.jsx)(Je,{ezoicId:106,ezoicAdsOpen:c})}),Object(L.jsx)(le.a,{item:!0,xs:12,style:{margin:"1vh"},children:Object(L.jsx)(me.a,{variant:"middle"})}),Object(L.jsx)(le.a,{item:!0,xs:12,children:Object(L.jsx)(R.a,{fontWeight:"bold",variant:"subtitle1",component:"h5",gutterBottom:!0,children:"Latest images"})}),Object(L.jsx)(le.a,{item:!0,xs:12,style:{minHeight:"70vh",overflow:"hidden"},children:Object(L.jsx)(ce,{})}),Object(L.jsx)(le.a,{item:!0,xs:12,sx:{margin:"1vh"},children:Object(L.jsx)(R.a,{sx:{fontSize:"0.9rem",fontWeight:"bold"},variant:"subtitle1",children:"hypnogramai@gmail.com"})}),Object(L.jsx)(le.a,{item:!0,xs:12,paddingTop:"0!important",paddingBottom:"0!important",sx:{backgroundColor:"background.secondary"},children:Object(L.jsx)(Je,{ezoicId:107,ezoicAdsOpen:c})})]})})}i.a.render(Object(L.jsx)(o.a.StrictMode,{children:Object(L.jsx)(Ke,{})}),document.getElementById("root")),function(e,t){try{setTimeout((function(t){!function(e){(function(e){var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),document.body.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}})(e),window.gtag("js",new Date),window.gtag("config",e)}(e),X($)}),t)}catch(n){console.log("Failed to intialize Google Analytics: ",n)}}("UA-210870963-1",4e3)}},[[150,1,2]]]);